/**
 * plugin.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*jshint unused:false */
/*global tinymce:true */

/**
 * Example plugin that adds a toolbar button and menu item.
 */
tinymce.PluginManager.add('insertfaq', function(editor, url) {
	// Add a button that opens a window
	editor.addButton('insertfaq', {
		text: '',
		icon: 'comments',
		tooltip: 'Vraag en antwoord onderwerp invoegen',
		onclick: function() {
			// Open window with a specific url
			editor.windowManager.open({
				title: 'Vraag en antwoord onderwerp invoegen',
				url: '/flip/insertfaq/index.php',
				width: 600,
				height: 100,
				buttons: [
					{
						text: 'Invoegen',
						onclick: function() {
							// Top most window object
							var win = editor.windowManager.getWindows()[0];
							// Insert the contents of the dialog.html textarea into the editor
							var e = win.getContentWindow().document.getElementById('faq_cat');
							var insertVal = e.options[e.selectedIndex].value;
							if (insertVal) {
								editor.insertContent('<p>{'+e.options[e.selectedIndex].value+'}</p>');
								win.close();
							}
						}
					},
					{text: 'Close', onclick: 'close'}
				]
			});
		}
	});
});